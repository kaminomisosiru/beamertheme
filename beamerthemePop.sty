% Copyright 2020 by Keitaro Hashimoto
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.

\mode<presentation>

\RequirePackage{tikz}

\usecolortheme{rose}
\usecolortheme{dolphin}
\useinnertheme{circles}
\useoutertheme{infolines}

% itemizeの頭
\setbeamertemplate{itemize subitem}{\tiny\raise1.5pt\hbox{\donotcoloroutermaths$\blacktriangleright$}}

% 左右の余白
\setbeamersize{text margin left=1em,text margin right=1em}

%Beamerの設定
\usefonttheme{structurebold} % タイトル部を太字
\setbeamerfont{alerted text}{series=\bfseries} % Alertを太字
\setbeamerfont{section in toc}{series=\mdseries} % 目次は太字にしない
\setbeamerfont{frametitle}{size=\Large} % フレームタイトル文字サイズ
\setbeamerfont{title}{size=\Large}
\setbeamerfont{author}{size=\normalsize} % 著者文字サイズ
\setbeamerfont{institute}{size=\small}
\setbeamerfont{date}{size=\small}  % 日付文字サイズ

%Beamer色設定
\definecolor{UniBlue}{RGB}{0,157,230}
\definecolor{AlertOrange}{RGB}{255,4,0}
\definecolor{AlmostBlack}{RGB}{38,38,38}
\setbeamercolor{normal text}{fg=AlmostBlack}  % 本文カラー
\setbeamercolor{structure}{fg=UniBlue} % 見出しカラー
\setbeamercolor{block title}{fg=UniBlue!70!black} % ブロック部分タイトルカラー
\setbeamercolor{alerted text}{fg=AlertOrange} % \alert 文字カラー

%フラットデザイン化
\setbeamertemplate{blocks}[rounded] % blockの角をまるく
\setbeamertemplate{navigation symbols}{} % ナビゲーションシンボルを消す
\setbeamertemplate{headline}{}
\setbeamertemplate{footline}[frame number]{} % フッターはスライド番号のみ
\setbeamerfont{footline}{size=\small,series=\bfseries} % スライド番号を大きく

% itemize
\setbeamercolor{enumerate item}{bg=orange}
\setbeamertemplate{itemize item}{
\tikz[baseline=-3.6pt]
  \node[rectangle, draw=structure, fill=structure, ultra thick, minimum width=0.8mm, minimum height = 0.8mm] (0,0) { };%
}
\setbeamertemplate{itemize subitem}{%
\tikz[baseline=-3pt]
  \node[rectangle, draw=structure, fill=white, ultra thick, minimum width=0.7mm, minimum height = 0.7mm] (0,0) { };%
}

% 参考文献リストの色
% \setbeamercolor{bibliography item}{fg=black,bg=white} 引用番号
\setbeamercolor*{bibliography entry author}{fg=black,bg=white} % 著者
\setbeamercolor*{bibliography entry journal}{fg=black,bg=white}
\setbeamercolor*{bibliography entry note}{fg=black,bg=white}
\setbeamercolor*{bibliography entry location}{fg=gray} % 雑誌名とか
\setbeamercolor*{bibliography entry title}{fg=black,bg=white}
\beamertemplatetextbibitems

%タイトルページ
\setbeamertemplate{title page}{%
    \vspace{2.5em}%
    \begin{flushleft}%
        {\usebeamerfont{title} \usebeamercolor[fg]{title} \inserttitle \par}%
        \medskip
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle \par}%
    \end{flushleft}%
    \textcolor{orange}{\rule[-1.5mm]{\linewidth}{2pt}}%
    \vspace{1.5em}%

    \begin{beamercolorbox}[wd=\paperwidth,leftskip=0.4\paperwidth]{}
            {\usebeamerfont{institute}\insertinstitute \par}%
            \smallskip%
        	{\usebeamerfont{author}\insertauthor\par}%
        	\bigskip%
        	{\usebeamerfont{date}\insertdate\par}%
        	\smallskip%
        	{\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic}%
    \end{beamercolorbox}
}

% スライドタイトル
\setbeamertemplate{frametitle}{%
\vspace{1mm}
\insertframetitle\par
\vspace{-2mm}
\textcolor{UniBlue!85!black}{\rule[-1.5mm]{0.05\linewidth}{2pt}}\rule{0.01\linewidth}{0pt}\textcolor{orange}{\rule[-1.5mm]{0.94\linewidth}{2pt}}
}

%allowframebreaks numbering in the title
\newcounter{cont}
\setbeamertemplate{frametitle continuation}{%
    \setcounter{cont}{\beamer@endpageofframe}%
    \addtocounter{cont}{1}%
    \addtocounter{cont}{-\beamer@startpageofframe}%
    \ifnum \value{cont}>1%
    [\insertcontinuationcount/\arabic{cont}]
    \fi%
}

% sectionpageのデザイン
\setbeamertemplate{section page}
{
    \begin{beamercolorbox}[center]{section title}
        \usebeamerfont{section title}\insertsection\par
    \end{beamercolorbox}
}

% 背景色の無いblock:descriptionの代わりに使える
\newenvironment<>{descriptionblock}[1]{%
    \setbeamertemplate{blocks}[default]%
    \setbeamercolor{block title}{fg=UniBlue!130,bg=white}%
    \begin{block}#2{#1}}{\end{block}
}

\mode
<all>
